Kubernetes - technologia zarządzania i obsługi kontenerami (Cointainer Orchiestration). Jest też Docker Swarm do obsługi kontenerów 
ale brakuje mu zaawansowanych funkcji w złożonych aplikacjach.

Klaster - jest zbiorem połączonych węzłów (nodów)
Node (Minions) - jest to węzeł (node) który jest maszyną fizyczną lub wirtualną na kórej zainstalowany jest Kubernetes i tam Kubernetes uruchamia kontenery 
Worker node - tworzy się więcej nić jeden Node, jesli jeden node ulegnie awarii, aplikacja będzie dostępna z innych nodów. Plus obciążenie jest mniejsze.
Master Node - to kolejny node z zainstalowanych Kubernetesem, skonfigurowany jako Master. Obsługuje nody w klastrze. 
______________________________________
              KLASTER

__________________
      Master      |    
                  |
*Kubernetes       |
__________________|
*Master Node
__________________
      Node        |    
--------------    |
Docker Kontener   |
--------------    |
*Kubernetes       |
__________________|
*Worker node
__________________
      Node        |    
--------------    |
Docker Kontener   |
--------------    |
*Kubernetes       |
__________________|
*Worker node
______ERROR________
      Node        |    
--------------    |
Docker Kontener   |
--------------    |
*Kubernetes       |
__________________|
*Worker node
______________________________________

COMPONENTY - podczas instalacji Kubernetesa instaluje się następujące komponenty:

---------------API SERVER------------------------------

API SERVER - jest to interface dla Kubernetesa tj. użytkownicy, urządzenie zarządzające, interface wiersza poleceń. 
Działa jako główny punkt komunikacji między wszystkimi elementami systemu, wszystko co się dzieje w Klastrze przechodzi przez niego.
Przyjmuje rządania (requests) od użytkowników, narzędzi (kubectl), kontenerów i innych komponentów. Waliduje i autorycuje te rządania,
sprawdza, czy żądania są poprawne (np. czy YAML ma prawidłową strukturę, czy użytkownik ma uprawnienia).
Zapisuje i odczutuje dane z etcd (bazy danych przechowującej stan klastra). Zapisuje stan klastra do etcd  (bazy danych, w której 
przechowywany jest aktualny stan całego klastra).
Udostępnia dane innym komponentom – np. kubelet, scheduler czy controller manager komunikują się z API Serverem, żeby wiedzieć, co mają robić.

Przykład:
1. Administrator wpisuje:
kubectl create pod --image=nginx
2. kubectl wysyła żądanie do API Servera.
3. API Server:
- Sprawdza, czy użytkownik ma uprawnienia (RBAC, autoryzacja),
- Waliduje żądanie,
- Zapisuje nowy obiekt Pod w etcd.
4. Controller Manager widzi, że pojawił się nowy Pod.
5. Scheduler wybiera węzeł, na którym Pod ma się uruchomić.
6. Kubelet na danym węźle kontaktuje się z API Serverem, pobiera definicję i uruchamia kontener.

-----------------etcd----------------------------
etcd - przechowuje wartości klucz-wartość używanych przez Kubernetes do przechowywania wszystkich danych używanych do zarządzania klastrem. 
W etcd zapisany jest pełny, aktualny stan wszystkiego w klastrze.
Jest odpowiedzialny za blokady w klastrze, aby upewnić sie że nie ma konflitów między Masters

Przykłady danych w etcd:
- definicje wszystkich Podów, Deploymentów, Service’ów, ConfigMap, itp.
- informacje o użytkownikach, rolach i uprawnieniach (RBAC),
- dane o statusie węzłów (Node),
- dane konfiguracyjne dotyczące samego klastra.
Można to sobie wyobrazić jak wewnętrzną bazę danych Kubernetes, w której zapisane są wszystkie obiekty API.
Dane są trwale zapisane na dysku (nie znikają po restarcie klastra)
Dostęp tylko przez API Server – inne komponenty nie łączą się bezpośrednio z etcd.
Jeśli etcd się uszkodzi lub dane zostaną utracone — Kubernetes „traci pamięć” o tym, jakie obiekty miały istnieć w klastrze.
Zwykle tworzy się kopie zapasowe (snapshoty) etcd

----------------SCHEDULER-----------------------------
SCHEDULER - przypisuje nowe Pody do konkretnych węzłów (Node) w klastrze. Decyduje, na którym węźle (Node) zostanie uruchomiony nowy Pod.
Odpowiedzialny jest za dystrybucję pracy dla kontenerów w wielu nodach. Poszukuje nowo utworzonych kontenerów i przypisuje je do nodów kontener <=> node. 

Przykład:

1. Tworzysz Pod (np. przez kubectl apply -f pod.yaml).
2. API Server zapisuje ten obiekt w etcd.
3. Scheduler zauważa, że Pod nie ma przypisanego węzła (.spec.nodeName jest puste).
4. Scheduler:
- zbiera informacje o wszystkich dostępnych węzłach,
- filtruje je, aby wyeliminować te, które nie spełniają wymagań,
- ocenia i wybiera najlepszy węzeł.
5. Wynik (wybrany Node) przekazuje z powrotem do API Servera.
6. API Server aktualizuje obiekt Pod w etcd.
7. Kubelet na wybranym węźle widzi, że ma uruchomić ten Pod — i to robi.

Wynagradzanie (Scoring)
Dla węzłów, które przeszły filtr, scheduler nadaje punkty według różnych algorytmów:
balansowanie obciążenia,
lokalność danych,
preferencje (preferredDuringScheduling),
dostępność zasobów.
Węzeł z najwyższym wynikiem wygrywa.

----------------CONTROLLER-----------------------------

CONTROLLER - jest odpowiedzialny za orchiestrację, reaguje gdy node, kontener przestają działać. Podejmuje decyzję o wprowadzeniu nowych pojemników. 
Controller to proces, który ciągle monitoruje aktualny stan klastra i porównuje go z pożądanym stanem (tym, który zadeklarowałeś w YAML-u).

----------------CONTAINER RUNTIME-----------------------------
CONTAINER RUNTIME - Uruchamia kontenery (Dockera)

----------------kubelet-----------------------------
kubelet - jest agentem działającym na każdym worker nodzie w klastrze, jest odpowiedzialny za upewnienie się, że kontenery działają. 

----------------kubectl-----------------------------
kubectl (kube) - commandline, narzędzie wiersza poleceń kube. Narzędzie to służy do wdrażania i zarządzania aplikacjami w klastrze Kubernetes. 
Aby uzyskać informacje o klastrze, statusie nodów itp. 

Komendy:
kubectl run hello-minikube
kubectl cluster-info
kubectl get nodes

Master vs Worker Node
__________________
      Master      |    
</>kube-apiserver |
etcd              |
controller        |
scheduler         |
__________________|
*Master Node
__________________
      Node        |    
</>kubelet        |
Kontainer Runtime |
--------------    |
*Kubernetes       |
__________________|
*Worker node


